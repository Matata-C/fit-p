# 拍照识物功能说明

## 功能概述

拍照识物功能是一个智能食物识别系统，用户可以通过拍照或选择相册中的图片来识别食物，获取营养信息和热量数据。

## 主要特性

### 1. 智能识别
- 支持多种常见食物识别
- 提供详细的营养信息（蛋白质、脂肪、碳水化合物、纤维）
- 显示识别置信度
- 提供营养小贴士

### 2. 支持的食物类型
- 🍌 香蕉 - 89千卡/100g
- 🍎 苹果 - 52千卡/100g  
- 🍊 橙子 - 47千卡/100g
- 🍚 米饭 - 116千卡/100g
- 🍗 鸡肉 - 165千卡/100g
- 🐟 鱼肉 - 84千卡/100g
- 🥚 鸡蛋 - 155千卡/100g
- 🥛 牛奶 - 42千卡/100ml
- 🍞 面包 - 265千卡/100g
- 🥬 蔬菜 - 25千卡/100g

### 3. 记录管理
- 自动保存识别结果到本地存储
- 查看历史食物记录
- 支持删除记录
- 显示今日摄入热量统计

## 使用方法

### 1. 拍照识别
1. 在分析页面点击"智能食物识别"区域
2. 选择"拍照"或"从相册选择"
3. 拍摄或选择食物图片
4. 等待识别结果
5. 查看营养信息和热量数据
6. 可选择"添加到记录"保存结果

### 2. 查看记录
1. 在分析页面点击"查看食物记录"
2. 查看所有历史记录
3. 查看今日摄入统计
4. 可删除不需要的记录

## 技术实现

### 1. 云函数架构
- `cloudfunctions/imageRecognition/index.js` - 图像识别云函数
- 包含食物数据库和识别逻辑
- 支持扩展更多食物类型

### 2. 前端实现
- `pages/analysis/analysis.js` - 分析页面逻辑
- `pages/food-records/food-records.js` - 食物记录页面
- 完整的UI交互和数据管理

### 3. 数据存储
- 使用微信小程序本地存储
- 按日期组织食物记录
- 支持数据持久化

## 扩展说明

### 1. 添加新食物类型
在 `cloudfunctions/imageRecognition/index.js` 中的 `foodDatabase` 对象中添加新的食物信息：

```javascript
'newFood': {
  name: '新食物名称',
  calories: 100,
  unit: '100g',
  nutrition: {
    protein: 5.0,
    fat: 2.0,
    carbs: 15.0,
    fiber: 3.0
  },
  tips: '营养小贴士'
}
```

### 2. 集成真实AI识别
当前使用模拟识别，可以集成真实的AI图像识别API：

1. 在云函数中调用第三方AI服务
2. 处理识别结果并匹配到食物数据库
3. 返回标准化的营养信息

### 3. 功能优化建议
- 添加食物搜索功能
- 支持手动输入食物信息
- 添加营养目标设置
- 支持食物组合识别
- 添加营养分析报告

## 注意事项

1. 当前版本使用模拟识别，实际项目中需要集成真实的AI识别服务
2. 图片上传到云存储，注意隐私保护
3. 营养数据仅供参考，实际营养含量可能有差异
4. 建议定期清理云存储中的图片文件

## 文件结构

```
├── cloudfunctions/
│   └── imageRecognition/
│       ├── index.js          # 图像识别云函数
│       └── package.json      # 云函数依赖
├── pages/
│   ├── analysis/
│   │   ├── analysis.js       # 分析页面逻辑
│   │   ├── analysis.wxml     # 分析页面模板
│   │   └── analysis.wxss     # 分析页面样式
│   └── food-records/
│       ├── food-records.js   # 食物记录页面逻辑
│       ├── food-records.wxml # 食物记录页面模板
│       ├── food-records.wxss # 食物记录页面样式
│       └── food-records.json # 食物记录页面配置
└── app.json                  # 应用配置（已添加新页面）
``` 