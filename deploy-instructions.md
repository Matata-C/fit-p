# 🚀 一键部署指南

## 问题解决：FunctionName parameter could not be found

### 当前状态
✅ 已简化云函数代码，移除了阿里云依赖
✅ 已优化package.json，只保留必要依赖
✅ 已添加测试功能

### 立即执行步骤

#### 1. 在微信开发者工具中部署
1. 打开微信开发者工具
2. 右键点击 `cloudfunctions/imageRecognition` 文件夹
3. 选择 **"上传并部署：云端安装依赖"**
4. 等待部署完成（约1-2分钟）

#### 2. 验证部署
1. 打开云开发控制台
2. 进入"云函数"页面
3. 确认 `imageRecognition` 函数状态为"正常"

#### 3. 测试云函数
在前端代码中测试：
```javascript
// 测试云函数是否正常工作
wx.cloud.callFunction({
  name: 'imageRecognition',
  data: { action: 'test' },
  success: (res) => {
    console.log('✅ 云函数测试成功:', res);
    wx.showToast({
      title: '云函数部署成功！',
      icon: 'success'
    });
  },
  fail: (err) => {
    console.error('❌ 云函数测试失败:', err);
    wx.showToast({
      title: '云函数部署失败',
      icon: 'error'
    });
  }
});
```

### 如果部署失败

#### 方案1：删除重新部署
1. 在云开发控制台删除 `imageRecognition` 函数
2. 重新右键部署

#### 方案2：使用备用版本
1. 将 `index-simple.js` 重命名为 `index.js`
2. 重新部署

#### 方案3：检查环境
1. 确认云开发环境已开通
2. 检查网络连接
3. 重启微信开发者工具

### 部署成功后的功能

#### 当前支持的功能：
- ✅ 拍照识别食物（模拟）
- ✅ 手动添加食物
- ✅ 查看食物记录
- ✅ 食物营养信息显示

#### 测试方法：
1. 点击"拍照识别食物"
2. 选择任意图片
3. 系统会随机返回一个食物信息
4. 可以正常添加到记录

### 后续升级计划

#### 第一阶段：基础功能稳定
- [x] 简化云函数部署
- [x] 确保基本功能正常
- [ ] 测试所有功能模块

#### 第二阶段：集成阿里云AI
- [ ] 配置阿里云访问密钥
- [ ] 重新添加阿里云依赖
- [ ] 实现真实AI识别

### 联系支持
如果问题仍然存在：
1. 截图云开发控制台错误信息
2. 提供具体的错误代码
3. 描述操作步骤

---

**🎉 现在请按照上述步骤部署云函数！** 